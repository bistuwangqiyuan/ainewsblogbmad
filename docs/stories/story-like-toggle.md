# 用户故事：点赞可取消的交互与按钮状态

- ID: STORY-LIKE-TOGGLE-001
- 史诗：Epic 3：互动与积分等级
- 角色：登录用户
- 价值：清晰的点赞状态与可取消交互，避免重复操作困惑。

## 故事描述

作为登录用户，我希望在新闻/帖子/回答详情页，能够看到点赞按钮的当前状态（已点赞/未点赞），点击可切换状态，并在切换时得到即时反馈。

## 验收标准（AC）

1. 详情页在加载时根据 `likes` 是否存在（`entity_type+entity_id+user_id`）决定按钮文案（点赞/取消点赞）。
2. 点击“点赞”插入一条 likes；点击“取消点赞”删除对应 likes。
3. 操作成功后按钮状态即时切换；失败弹出错误提示。
4. 未登录点击时提示登录。

## 完成定义（DoD）

- 前端状态查询与切换逻辑实现于 新闻详情、帖子详情；
- 单元测试覆盖状态判断与错误分支；
- 文档更新。

## 估算与优先级

- 故事点：3
- 优先级：P1
