# 需求

## 功能需求

**FR1:** 用户认证系统 - 支持邮箱密码注册登录，基于 Supabase Auth 实现，会话持久化

**FR2:** 新闻聚合与展示 - 自动抓取 20 个来源的 AI 编程新闻，支持筛选、搜索、分页（20条/页，最大50页）

**FR3:** 社区发帖系统 - 支持用户发布帖子、提问，上传图片/视频（≤10MB，最多5个），同一数据结构下分为论坛和问答两个标签

**FR4:** 互动功能 - 点赞（可取消）、收藏（不可删除）、评论（仅一级，不可编辑/删除）、举报（文本原因）

**FR5:** AI 问答系统 - 公开的 AI 专家问答，调用外部 AI API，失败时明确报错不使用回退机制

**FR6:** 积分等级体系 - 基于用户行为的积分计算和等级展示（Lv1-5，0/50/150/400/1000阈值）

**FR7:** 个人中心 - 用户资料、统计信息（发帖/评论/收藏计数）、积分记录展示

**FR8:** 消息通知系统 - 私信、系统通知功能，支持已读/未读状态

**FR9:** 敏感词过滤 - 前端 RPC 预检 + 数据库触发器强校验，命中直接拒写并提示

**FR10:** 数据统计 - 浏览量记录、个人行为统计、积分变更记录

**FR11:** 反馈系统 - 用户反馈提交，支持文本和附件（≤10MB）

**FR12:** 内容管理 - 新闻去重（sha1哈希）、内容分类、标签管理

**FR13:** 搜索筛选 - 按来源、时间、关键词筛选，时间优先排序

**FR14:** 媒体管理 - 图片（jpg/png/webp）、视频（mp4）上传至 Supabase Storage

## 非功能需求

**NFR1:** 性能要求 - 新闻列表加载时间 ≤2秒，支持 20 条/页分页，关键查询建立索引

**NFR2:** 安全要求 - 最小权限原则，RLS 策略保护用户数据，Storage 写入路径隔离

**NFR3:** 可用性要求 - 99.5% 服务可用性，移动端响应式设计，WCAG AA 可访问性

**NFR4:** 数据要求 - 每日抓取 ≥100 条新闻，去重后入库，失败源记录日志

**NFR5:** 存储要求 - 图片/视频文件 ≤10MB，支持 jpg/png/webp/mp4 格式

**NFR6:** 扩展性要求 - 支持未来功能扩展，模块化架构设计

**NFR7:** 运维要求 - 定时任务日志化，失败源可定位，环境变量管理敏感信息
